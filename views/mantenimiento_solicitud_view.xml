<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_maintenance_request_form_inherit" model="ir.ui.view">
        <field name="name">maintenance.request.form.inherit</field>
        <field name="model">maintenance.request</field>
        
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_form"/>
        
        <field name="arch" type="xml">
            
            <!-- Ocultar campos innecesarios -->
            <xpath expr="//field[@name='request_date']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='maintenance_type']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='maintenance_team_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='schedule_date']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//label[@for='duration']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//div[field[@name='duration']]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='priority']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='email_cc']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='equipment_id']" position="attributes">
                <attribute name="string">Coloquial</attribute>
            </xpath>

            <xpath expr="//field[@name='category_id']" position="replace">
                <field name="category_id" invisible="1" class="d-none" force_save="1"/>
            </xpath>

            <xpath expr="//field[@name='name']" position="attributes">
                <attribute name="required">False</attribute>
                <attribute name="placeholder">Autogenerado al guardar</attribute>
            </xpath>
    
            <xpath expr="//field[@name='equipment_id']" position="after">
                <field name="fecha_creacion_custom"/>
                <field name="fecha_programacion_custom"/>
                <field name="descripcion_corta"/>
                <field name="hrs"/>
                <field name="tec"/>
                <field name="hh"/> 
                <field name="programador_id"/>
                <field name="taller_id" widget="many2one" string="Ubicación Técnica"/>
            </xpath>

            <xpath expr="//field[@name='user_id']" position="attributes">
                <attribute name="string">Líder</attribute>
            </xpath>

            <xpath expr="//field[@name='user_id']" position="after">
                <field name="tecnico_id"/>
            </xpath>
            
            <xpath expr="//field[@name='tecnico_id']" position="after">
                <field name="repuesto_line_ids">
                    <list editable="bottom">
                        <field name="product_id"/>
                        <field name="quantity"/>
                        <field name="uom_id"/>
                    </list>
                </field>
                
                <button name="action_consumir_repuestos" type="object" 
                        string="Descontar Stock" class="btn-primary"
                        confirm="¿Está seguro de descontar estos repuestos del inventario?"/>
            </xpath>

           <xpath expr="//field[@name='description']/.." position="after">

                <page string="Notificado" name="page_notificado_nam">
                    <group>
                        <group>
                            <field name="hh_real"/>
                            <field name="porcentaje_completado" widget="percentage"/>
                            <field name="fecha_notificacion"/>
                        </group>
                        <group>
                            <field name="comentario_notificacion"/>
                        </group>
                    </group>
                </page>   

            </xpath>

        </field>
    </record>

    <record id="maintenance.menu_m_request" model="ir.ui.menu">
        <field name="name">Orden de Trabajo</field>
    </record>

    <record id="maintenance.hr_equipment_request_action" model="ir.actions.act_window">
        <field name="name">Orden de Trabajo</field>
    </record>
    
    <record id="view_maintenance_request_kanban_nam_inherit" model="ir.ui.view">
            <field name="name">maintenance.request.kanban.nam.inherit</field>
            <field name="model">maintenance.request</field>
            <field name="inherit_id" ref="maintenance.hr_equipment_request_view_kanban"/>
            <field name="arch" type="xml">

               

                <xpath expr="//field[@name='name']" position="after">
                    
                    <t t-if="record.fecha_programacion_custom.raw_value">
                        <div class="text-info" style="font-size: 11px; font-weight: bold; margin-top: 2px; margin-bottom: 2px;">
                            <field name="fecha_programacion_custom"/>
                        </div>
                    </t>

                    <t t-if="record.descripcion_corta.raw_value">
                        <div class="text-primary" style="font-size: 11px; font-weight: bold; margin-top: 2px; margin-bottom: 2px;">
                            <field name="descripcion_corta"/>
                        </div>
                    </t>

                    <t t-if="record.description.raw_value">
                        <div class="text-muted" style="font-size: 10px; margin-top: 4px; font-style: italic; white-space: normal;">
                            
                            <field name="description"/>
                        </div>
                    </t>

                </xpath>
                
                

            </field>
        </record>

</odoo>